{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\mshuk\\\\OneDrive\\\\\\u05E9\\u05D5\\u05DC\\u05D7\\u05DF \\u05D4\\u05E2\\u05D1\\u05D5\\u05D3\\u05D4\\\\ProjectStudents\\\\meitav\\\\src\\\\components\\\\formStudent\\\\FormStudent.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useCallback } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useFormContext } from '../../context/FormContext';\nimport './formStudent.css';\nimport BtnNavigate from '../btnNavigate/BtnNavigate';\nimport { API_URL, ROUTES } from '../../constants/constUrls';\nimport { validateForm } from '../../utils/validateForm';\nimport useCities from '../../hooks/useCities';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst initialFormData = {\n  firstName: '',\n  lastName: '',\n  dateOfBirth: '',\n  israeliID: '',\n  cityID: 1\n};\nconst initialErrors = {\n  firstName: '',\n  lastName: '',\n  dateOfBirth: '',\n  israeliID: '',\n  city: '',\n  general: ''\n};\nconst FormStudent = () => {\n  _s();\n  const {\n    addStudent\n  } = useFormContext();\n  const cities = useCities();\n  const navigate = useNavigate();\n  const [formData, setFormData] = useState(initialFormData);\n  const [errors, setErrors] = useState(initialErrors);\n  const handleChange = useCallback(e => {\n    const {\n      name,\n      value\n    } = e.target;\n    if (name === 'israeliID' && !/^\\d*$/.test(value)) {\n      setErrors(prevErrors => ({\n        ...prevErrors,\n        israeliID: 'תעודת זהות יכולה להכיל רק מספרים'\n      }));\n      return;\n    }\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: name === 'cityID' ? parseInt(value, 10) : value\n    }));\n    setErrors(prevErrors => ({\n      ...prevErrors,\n      [name]: '',\n      general: ''\n    }));\n  }, []);\n  const handleSubmit = useCallback(async e => {\n    e.preventDefault();\n    const {\n      valid,\n      errors: validationErrors\n    } = validateForm(formData);\n    setErrors(validationErrors);\n    if (valid) {\n      try {\n        const response = await axios.post(API_URL.STUDENTS, formData);\n        addStudent(response.data);\n        navigate(ROUTES.USER_LIST);\n      } catch (error) {\n        console.error('שגיאה ביצירת סטודנט חדש:', error);\n        setErrors(prevErrors => ({\n          ...prevErrors,\n          general: 'אירעה שגיאה בשמירת הנתונים. אנא נסה שוב.'\n        }));\n      }\n    }\n  }, [formData, addStudent, navigate]);\n  const renderFormField = (name, label, type = 'text') => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-group\",\n    children: [/*#__PURE__*/_jsxDEV(\"label\", {\n      htmlFor: name,\n      children: [label, \":\"]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n      type: type,\n      id: name,\n      name: name,\n      value: formData[name],\n      onChange: handleChange\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 13\n    }, this), errors[name] && /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"error-message\",\n      children: errors[name]\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 30\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 9\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"form-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\u05D8\\u05D5\\u05E4\\u05E1 \\u05D4\\u05E8\\u05E9\\u05DE\\u05D4\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: [renderFormField('firstName', 'שם פרטי'), renderFormField('lastName', 'שם משפחה'), renderFormField('dateOfBirth', 'תאריך לידה', 'date'), renderFormField('israeliID', 'תעודת זהות'), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"form-group\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"cityID\",\n          children: \"\\u05E2\\u05D9\\u05E8:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n          id: \"cityID\",\n          name: \"cityID\",\n          value: formData.cityID,\n          onChange: handleChange,\n          children: cities === null || cities === void 0 ? void 0 : cities.map(city => /*#__PURE__*/_jsxDEV(\"option\", {\n            value: city.cityID,\n            children: city.cityName\n          }, city.cityID, false, {\n            fileName: _jsxFileName,\n            lineNumber: 110,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 21\n        }, this), errors.city && /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"error-message\",\n          children: errors.city\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 115,\n          columnNumber: 37\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }, this), errors.general && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"error-message\",\n        children: errors.general\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 36\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: \"submit-button\",\n        children: \"\\u05E9\\u05DC\\u05D7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(BtnNavigate, {\n        text: \"\\u05DC\\u05E8\\u05E9\\u05D9\\u05DE\\u05D4 \\u05D4\\u05DE\\u05DC\\u05D0\\u05D4\",\n        url: ROUTES.USER_LIST\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 119,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 94,\n    columnNumber: 9\n  }, this);\n};\n_s(FormStudent, \"a9PpAaw7xQFg/9j3uah73zd4f9M=\", false, function () {\n  return [useFormContext, useCities, useNavigate];\n});\n_c = FormStudent;\nexport default FormStudent;\nvar _c;\n$RefreshReg$(_c, \"FormStudent\");","map":{"version":3,"names":["React","useState","useCallback","useNavigate","useFormContext","BtnNavigate","API_URL","ROUTES","validateForm","useCities","axios","jsxDEV","_jsxDEV","initialFormData","firstName","lastName","dateOfBirth","israeliID","cityID","initialErrors","city","general","FormStudent","_s","addStudent","cities","navigate","formData","setFormData","errors","setErrors","handleChange","e","name","value","target","test","prevErrors","prevData","parseInt","handleSubmit","preventDefault","valid","validationErrors","response","post","STUDENTS","data","USER_LIST","error","console","renderFormField","label","type","className","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","id","onChange","onSubmit","map","cityName","text","url","_c","$RefreshReg$"],"sources":["C:/Users/mshuk/OneDrive/שולחן העבודה/ProjectStudents/meitav/src/components/formStudent/FormStudent.tsx"],"sourcesContent":["import React, { useState, useCallback } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { useFormContext } from '../../context/FormContext';\r\nimport './formStudent.css';\r\nimport { IStudent } from '../../types/student';\r\nimport BtnNavigate from '../btnNavigate/BtnNavigate';\r\nimport { API_URL, ROUTES } from '../../constants/constUrls';\r\nimport { validateForm } from '../../utils/validateForm'; \r\nimport useCities from '../../hooks/useCities';\r\nimport axios from 'axios';\r\n\r\nconst initialFormData: IStudent = {\r\n    firstName: '',\r\n    lastName: '',\r\n    dateOfBirth: '',\r\n    israeliID: '',\r\n    cityID: 1\r\n};\r\n\r\nconst initialErrors = {\r\n    firstName: '',\r\n    lastName: '',\r\n    dateOfBirth: '',\r\n    israeliID: '',\r\n    city: '',\r\n    general: ''\r\n};\r\n\r\nconst FormStudent: React.FC = () => {\r\n    const { addStudent } = useFormContext();\r\n    const cities = useCities();\r\n    const navigate = useNavigate();\r\n    const [formData, setFormData] = useState<IStudent>(initialFormData);\r\n    const [errors, setErrors] = useState(initialErrors);\r\n\r\n    const handleChange = useCallback((e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n        const { name, value } = e.target;\r\n\r\n        if (name === 'israeliID' && !/^\\d*$/.test(value)) {\r\n            setErrors(prevErrors => ({\r\n                ...prevErrors,\r\n                israeliID: 'תעודת זהות יכולה להכיל רק מספרים'\r\n            }));\r\n            return;\r\n        }\r\n\r\n        setFormData(prevData => ({\r\n            ...prevData,\r\n            [name]: name === 'cityID' ? parseInt(value, 10) : value\r\n        }));\r\n\r\n        setErrors(prevErrors => ({\r\n            ...prevErrors,\r\n            [name]: '',\r\n            general: ''\r\n        }));\r\n    }, []);\r\n\r\n    const handleSubmit = useCallback(async (e: React.FormEvent) => {\r\n        e.preventDefault();\r\n        const { valid, errors: validationErrors } = validateForm(formData); \r\n        setErrors(validationErrors);\r\n\r\n        if (valid) {\r\n            try {\r\n                const response = await axios.post(API_URL.STUDENTS, formData);\r\n                addStudent(response.data);\r\n                navigate(ROUTES.USER_LIST);\r\n            } catch (error) {\r\n                console.error('שגיאה ביצירת סטודנט חדש:', error);\r\n                setErrors(prevErrors => ({\r\n                    ...prevErrors,\r\n                    general: 'אירעה שגיאה בשמירת הנתונים. אנא נסה שוב.'\r\n                }));\r\n            }\r\n        }\r\n    }, [formData, addStudent, navigate]);\r\n\r\n    const renderFormField = (name: keyof IStudent, label: string, type: string = 'text') => (\r\n        <div className=\"form-group\">\r\n            <label htmlFor={name}>{label}:</label>\r\n            <input\r\n                type={type}\r\n                id={name}\r\n                name={name}\r\n                value={formData[name]}\r\n                onChange={handleChange}\r\n            />\r\n            {errors[name] && <span className=\"error-message\">{errors[name]}</span>}\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <div className=\"form-container\">\r\n            <h1>טופס הרשמה</h1>\r\n            <form onSubmit={handleSubmit}>\r\n                {renderFormField('firstName', 'שם פרטי')}\r\n                {renderFormField('lastName', 'שם משפחה')}\r\n                {renderFormField('dateOfBirth', 'תאריך לידה', 'date')}\r\n                {renderFormField('israeliID', 'תעודת זהות')}\r\n                <div className=\"form-group\">\r\n                    <label htmlFor=\"cityID\">עיר:</label>\r\n                    <select\r\n                        id=\"cityID\"\r\n                        name=\"cityID\"\r\n                        value={formData.cityID}\r\n                        onChange={handleChange}\r\n                    >\r\n                        {cities?.map(city => (\r\n                            <option key={city.cityID} value={city.cityID}>\r\n                                {city.cityName}\r\n                            </option>\r\n                        ))}\r\n                    </select>\r\n                    {errors.city && <span className=\"error-message\">{errors.city}</span>}\r\n                </div>\r\n                {errors.general && <div className=\"error-message\">{errors.general}</div>}\r\n                <button type=\"submit\" className=\"submit-button\">שלח</button>\r\n                <BtnNavigate\r\n                    text='לרשימה המלאה'\r\n                    url={ROUTES.USER_LIST}\r\n                />\r\n            </form>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FormStudent;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}